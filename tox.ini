[tox]
envlist = docs,docs-linkcheck,py27
skipsdist = True

[testenv]
usedevelop = False
setenv=
  HOME = {envtmpdir}
  PYTHONPATH = {toxinidir}
deps =
  -c{toxinidir}/upper-constraints.txt
  -chttps://gerrit.opnfv.org/gerrit/gitweb?p=functest.git;a=blob_plain;f=upper-constraints.txt;hb=refs/heads/master
  -r{toxinidir}/test-requirements.txt
  -r{toxinidir}/requirements.txt
install_command = pip install {opts} {packages}

[testenv:docs]
deps = -r{toxinidir}/docs/requirements.txt
commands =
    sphinx-build -b html -n -d {envtmpdir}/doctrees ./docs {toxinidir}/docs/_build/html
    echo "Generated docs available in {toxinidir}/docs/_build/html"
whitelist_externals = echo

[testenv:docs-linkcheck]
deps = -r{toxinidir}/docs/requirements.txt
commands = sphinx-build -b linkcheck -d {envtmpdir}/doctrees ./docs {toxinidir}/docs/_build/linkcheck

[testenv:py27]
commands = nosetests --with-xunit \
  --with-coverage \
  --cover-tests \
  --cover-package=sfc \
  --cover-xml \
  --cover-html \
  sfc/unit_tests/unit
